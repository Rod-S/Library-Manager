extends layout

block content
  h1 Patron: #{patrons[0].first_name} #{patrons[0].last_name}
  form
    p
      label(for='first_name') First Name
      input#first_name(type='text', name="first_name" value=patrons[0].first_name)
    p
      label(for='last_name') Last Name
      input#last_name(type='text', name="last" value=patrons[0].last_name)
    p
      label(for='address')  Address
      input#address(type='text', name="address" value=patrons[0].address)
    p
      label(for='email') Email
      input#email(type='text', name="email" value=patrons[0].email)
    p
      label(for='library_id') Library ID
      input#library_id(type='text', name="library_id" value=patrons[0].library_id)
    p
      label(for='zip_code') Zip Code
      input#zip_code(type='text', name="zip_code" value=patrons[0].zip_code)
    p
      input(type='submit' value='Update')
  h2 Loan History
  table
    thead
      tr
        th Book
        th Patron 
        th Loaned on
        th Return by 
        th Returned on
        th Action
    tbody
      tr
        td
          a(href='/../books/' + patrons[0].Loans[0].Book.id) #{patrons[0].Loans[0].Book.title}
        td
          a(href='/../patrons/' + patrons[0].id) #{patrons[0].first_name} #{patrons[0].last_name}
        td #{patrons[0].Loans[0].loaned_on}
        td #{patrons[0].Loans[0].return_by}
        if patrons[0].Loans[0].returned_on
          td #{patrons[0].Loans[0].returned_on}
          td
        if !patrons[0].Loans[0].returned_on
          td
          td
            a.button(href='/../patrons/return_book/' + patrons[0].Loans[0].Book.id) Return Book
